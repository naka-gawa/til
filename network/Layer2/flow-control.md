# フローコントロールについて
## Overview
- その名の通り Ethernet (L2) のフローを制御するもの
  - TCP にもフロー制御がある

## Detailed Explanation
- インターフェイス単位で輻輳を検知する
- バッファにはリングバッファが利用される
  - リングバッファとは、一時的にデータを溜めておくところ
  - Read Write のポインターが存在する
  - Write ポインターを Read ポインターが追い越すことは無い
  - Write が Read に追いつくとキューが解消したと判断
- 受信リングバッファがオーバーフローする前に、そのインターフェイスからマルチキャスト (0180:c200:0001) 宛に PAUSE フレームを送り、受信した端末は一定時間通信を止める
- IEEE802.3x
- 操作コードに PAUSE を示す `1` が入る
- 操作コードのあとに中断時間 `0-65535` が入っている
- このフレームを受け取ったクライアントは、中断時間*512のbit 分 送信を止める
  - 中断時間 = 10000 インターフェイス = 1G bps の場合
    - 送信停止時間 = (10000*512[bit]) / (1*1024*1024*1024[bit/sec]) = 4.7[msec]
  - この時間が経過する前であっても、バッファに空きができたら 中断時間 0 のPAUSE フレームを送ることで クライアントに転送開始をしてもよいことを伝えることができる。
  - ちなみに Ethernet の中身データの最小サイズは 46bit なので 46bit 目まで Padding で埋める。
- [ref](https://milestone-of-se.nesuke.com/nw-basic/ethernet/802-3x/)
